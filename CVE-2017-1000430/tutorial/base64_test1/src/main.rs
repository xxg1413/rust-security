//encode

extern crate base64;

fn main() {

    //let ch = 'a';
    
    let a = "Hello, world!";  //input string
    let b = b"Hello, world!";
    let c = "hello你是书";

    println!("{}",base64::encode(a));
    println!("{}",base64::encode(b));
    println!("{}",base64::encode(c));

    let url = "https://pxiaoer.blog:80/xxx?url=aa&&b=1&&c=这是个测试~%"; //%入数据库有问题
    
    println!("{}",base64::encode_config(url,base64::STANDARD));
    println!("{}",base64::encode_config(url,base64::URL_SAFE)); // +和/分别改成了-和_

    let mut buf = String::new();
    base64::encode_config_buf(url, base64::STANDARD, &mut buf);
    println!("{}", buf);

  
    let mut buf = Vec::new();
    buf.resize(url.len() * 4 / 3 + 4, 0);

    let bytes_written = base64::encode_config_slice(url,
                            base64::STANDARD, &mut buf);
    
    buf.resize(bytes_written, 0);

    println!("{},{}",url.len(),bytes_written);
}
